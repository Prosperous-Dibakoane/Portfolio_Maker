<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Portfolio Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            min-height: 100vh;
        }
        .builder-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            height: 80vh;
        }
        .tools {
            width: 300px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px 0 0 15px;
            padding: 20px;
            opacity: 0;
        }
        .canvas {
            flex: 1;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 0 15px 15px 0;
            padding: 20px;
            overflow-y: auto;
        }
        .section {
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-bottom: 10px;
            background: #fff;
            cursor: move;
            opacity: 0;
        }
        .tool-item {
            padding: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: grab;
            opacity: 0;
        }
        .tool-item:hover, .section:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        .btn {
            transition: transform 0.2s;
        }
        .btn:hover {
            transform: scale(1.05);
            animation: pulse 1.5s infinite;
        }
        .btn:active {
            animation: bounce 0.3s;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.95); }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            background: #28a745;
            display: none;
            transform: scale(0);
        }
        .preview {
            display: none;
            position: fixed;
            top: 10%;
            left: 10%;
            width: 80%;
            height: 80%;
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0);
        }
    </style>
</head>
<body>
    <div class="container builder-container my-5">
        <div class="tools">
            <h4 class="text-white">Add Sections</h4>
            <div class="tool-item" draggable="true" data-type="about">About</div>
            <div class="tool-item" draggable="true" data-type="projects">Projects</div>
            <div class="tool-item" draggable="true" data-type="skills">Skills</div>
            <div class="tool-item" draggable="true" data-type="contact">Contact</div>
            <button class="btn btn-primary mt-3" onclick="previewPortfolio()">Preview</button>
            <button class="btn btn-success mt-3" onclick="exportPortfolio()">Export</button>
            <button class="btn btn-info mt-3" onclick="savePortfolio()">Save</button>
            <button class="btn btn-info mt-3" onclick="loadPortfolio()">Load</button>
        </div>
        <div class="canvas" id="canvas"></div>
    </div>
    <div class="preview" id="preview"></div>
    <div class="notification" id="notification"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const canvas = document.getElementById('canvas');
        const templates = {
            about: '<h2 contenteditable="true">About Me</h2><p contenteditable="true">Tell us about yourself...</p>',
            projects: '<h2 contenteditable="true">Projects</h2><ul contenteditable="true"><li>Project 1</li><li>Project 2</li></ul>',
            skills: '<h2 contenteditable="true">Skills</h2><p contenteditable="true">JavaScript, HTML, CSS...</p>',
            contact: '<h2 contenteditable="true">Contact</h2><p contenteditable="true">Email: example@domain.com</p>'
        };
        gsap.to('.tools', { opacity: 1, duration: 1, ease: 'power2.out' });
        gsap.to('.tool-item', { opacity: 1, y: 0, stagger: 0.1, duration: 0.5, ease: 'power2.out', delay: 0.2 });

        document.querySelectorAll('.tool-item').forEach(item => {
            item.addEventListener('dragstart', e => {
                e.dataTransfer.setData('type', item.dataset.type);
            });
        });


        canvas.addEventListener('dragover', e => e.preventDefault());
        canvas.addEventListener('drop', e => {
            e.preventDefault();
            const type = e.dataTransfer.getData('type');
            const section = document.createElement('div');
            section.className = 'section';
            section.dataset.type = type;
            section.innerHTML = templates[type] + '<button class="btn btn-danger btn-sm mt-2" onclick="this.parentElement.remove(); animateSections()">Remove</button>';
            canvas.appendChild(section);
            animateSections();
        });

        function animateSections() {
            gsap.to('.section', { opacity: 1, scale: 1, stagger: 0.1, duration: 0.5, ease: 'power2.out' });
        }

        function previewPortfolio() {
            const preview = document.getElementById('preview');
            preview.innerHTML = '<button class="btn btn-secondary mb-3" onclick="closePreview()">Close</button>' + canvas.innerHTML;
            preview.style.display = 'block';
            gsap.to(preview, { scale: 1, duration: 0.5, ease: 'power2.out' });
        }

        function closePreview() {
            const preview = document.getElementById('preview');
            gsap.to(preview, {
                scale: 0,
                duration: 0.5,
                ease: 'power2.in',
                onComplete: () => preview.style.display = 'none'
            });
        }


        function exportPortfolio() {
            const html = `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>My Portfolio</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
                    <style>
                        body { padding: 20px; }
                        section { margin-bottom: 20px; }
                    </style>
                </head>
                <body>
                    ${canvas.innerHTML.replace(/<button[^>]*>Remove<\/button>/g, '')}
                </body>
                </html>
            `;
            const blob = new Blob([html], { type: 'text/html' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'portfolio.html';
            link.click();
            showNotification('Portfolio exported!');
        }

        function savePortfolio() {
            localStorage.setItem('portfolio', canvas.innerHTML);
            showNotification('Portfolio saved!');
        }

        function loadPortfolio() {
            const saved = localStorage.getItem('portfolio');
            if (saved) {
                canvas.innerHTML = saved;
                animateSections();
                showNotification('Portfolio loaded!');
            }
        }